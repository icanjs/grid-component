<!-- BEGIN STACHE TEMPLATE FOR DEMO -->
<style>
  .demo-container {
    width: initial!important;
  }
</style>
<script type="text/stache" id="demo" can-autorender>
  <can-import from="src/grid-component" />
  <can-import from="src/styles.less!" />
  <can-import from="src/demo/styles.less!" />
  <can-import from="grid-filter/" />
	<can-import from="multi-select" />

  <h3>Grid Filtering Demo</h3>
  <h4>With selected fileTypes binding: {{#each selectedFileTypes}} {{.}}, {{/each}}</h4>
  <h4>With search-terms binding: {{#searchTerms}} {{.}}, {{/searchTerms}}</h4>
  <div class="demo-container">
    <grid-component rows="{data}"
                    render-page-size="200"
                    sort-column-name="currency"
                    load-on-scroll="true"
                    sort-asc="false"> {{! sortAsc by default is true }}
      <div class="grid-tools">

        Show {{visibleRows.length}} of {{rows.length}} (Rendered {{renderedRows.length}})
        <span class="multi-select">
          <label>File Type:</label>
          <multi-select class="file-type-selector" select-all selected-values="{selectedFileTypes}">
            {{#each fileTypes}}
              <option value="{{fileTypeId}}">{{name}}</option>
            {{/each}}
          </multi-select>
        </span>

        <grid-filter rows="{rows}"
                     search-terms="{searchTerms}"
                     columns=""></grid-filter>
      </div>
      <div class="grid-wrapper">
        {{>example.stache}}
      </div>
    </grid-component>
  </div>
</script>
<!-- END STACHE TEMPLATE FOR DEMO -->

<!-- BEGIN JAVASCRIPT CODE FOR DEMO -->
<script src="../../../node_modules/steal/steal.js"
        main="can/view/autorender/">

  import can from 'can';
  import $ from 'jquery';
  import _ from 'lodash';

  /**
   * Sets up fixture data on the viewModel for the above template.  This is the same as setting
   * data inside the view-model.js for a grid-component.
   */
  $('#demo').viewModel().attr({
    searchTerms: [],
    selectedFileTypes: [],
    fileTypes: [
      {fileTypeId: 1, name: 'Type 1'},
      {fileTypeId: 2, name: 'Type 2'},
      {fileTypeId: 3, name: 'Type 3'},
      {fileTypeId: 4, name: 'Type 4'},
      {fileTypeId: 5, name: 'Type 5'}
    ],

    // The amount 30 is being used in the test - do not modify it (or update the test accordingly)!
    data: _.times(515, i => {
      return {
        period: 'P05FY0' + (i%9 + 1),
        region: ['Europe','America'][i<5?0:1],
        sales: 'Sales Org',
        country: ['Austria','Chicago'][i<5?0:1],
        accrualModel: 'WCM',
        currency: ['EUR','CAD','DKK'][i % 3],
        estRevenue: '20175.28',
        estListener: '4392952.04',
        fileSize: [905, 0.75][i%2],
        estPlayCount: '71963442.49',
        isVisible: true
      };
    })
  });
</script>
<!-- END JAVASCRIPT CODE FOR DEMO -->
